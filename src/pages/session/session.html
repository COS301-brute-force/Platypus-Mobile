<ion-header>
  <ion-toolbar #content color="primary" class="split-bill-nav">
    <button ion-button menuToggle><ion-icon name="menu"></ion-icon></button>
    <img src="assets/logos/nav-logo.png"/>
    <ion-title>{{ sessionOwner }}'s Session</ion-title>

    <ion-segment col-10 [(ngModel)]="selectedItems">
      <ion-segment-button value="all-items">
        <ion-icon [ngStyle]="{ color: color }" name="list-box"></ion-icon>
      </ion-segment-button>
      <ion-segment-button value="my-items">
        <ion-icon [ngStyle]="{ color: color }" name="done-all"></ion-icon>
      </ion-segment-button>
    </ion-segment>

  </ion-toolbar>
</ion-header>

<ion-menu [content]="content" class="menu">
  <ion-content>
    <ion-list>
      <button menuClose ion-item icon-start
        color="accents01"
        *ngFor="let p of pages"
        (click)="this[p.function](p.component)"
        [innerHtml] = p.title>
      </button>
    </ion-list>
  </ion-content>
</ion-menu>

<ion-content ion-row padding text-center  [ngSwitch]="selectedItems">
  <ion-list *ngSwitchCase="'all-items'">
    <ng-container *ngFor="let itemIter of items">
      <ion-item-sliding class="card-container" #item>

        <ion-item class=card-top>
            <span class="card-info card-price">R<span>{{itemIter.getPrice()}}</span></span>
            <span class="card-info card-name">{{itemIter.getName()}}</span>
            <span class="card-info card-quantity">{{itemIter.getQuantity()}}</span>
        </ion-item>

        <ion-item-options class="card-bottom" side="right">

          <button ion-button icon-only round clear small (click)="removeItem(itemIter)" class="card-modify card-remove" [ngClass]="itemIter.getMyQuantity() <= 0 ? 'card-modify-disabled' : ''">
            <ion-icon name="remove-circle"></ion-icon>
          </button>

          <button ion-button icon-only round clear small (click)="addItem(itemIter)" class="card-modify card-claim">
            <ion-icon name="add-circle"></ion-icon>
          </button>

        </ion-item-options>

        <ion-item-options class="card-bottom" side="left">
          <button ion-button icon-only round clear small (click)="editItem(itemIter)" class="card-modify card-edit">
            <ion-icon name="hammer"></ion-icon>
          </button>
        </ion-item-options>

    </ion-item-sliding>
    </ng-container>
  </ion-list>

  <ion-list *ngSwitchCase="'my-items'">
    <ng-container *ngFor="let itemIter of items">
      <ion-item-sliding class="card-container" *ngIf="itemIter.getMyQuantity() > 0" #item>

          <ion-item class=card-top>
              <span class="card-info card-price">R<span>{{itemIter.getPrice()}}</span></span>
              <span class="card-info card-name">{{itemIter.getName()}}</span>
              <span class="card-info card-quantity">{{itemIter.getMyQuantity()}}</span>
          </ion-item>

          <ion-item-options class="card-bottom" side="right">

            <button ion-button icon-only round clear small (click)="removeItem(itemIter)" class="card-modify card-remove">
              <ion-icon name="remove-circle"></ion-icon>
            </button>

            <button ion-button icon-only round clear small (click)="addItem(itemIter)" class="card-modify card-claim" [ngClass]="itemIter.getQuantity() <= 0 ? 'card-modify-disabled' : ''">
              <ion-icon name="add-circle"></ion-icon>
            </button>

          </ion-item-options>

          <ion-item-options class="card-bottom" side="left">
            <button ion-button icon-only round clear small (click)="editItem(itemIter)" class="card-modify card-edit">
              <ion-icon name="hammer"></ion-icon>
            </button>
          </ion-item-options>

      </ion-item-sliding>
    </ng-container>
  </ion-list>

</ion-content>
<ion-footer>
  <ion-toolbar color="primary">
    <ion-title class="bill-total">Bill Total: <span class="bill-total-amount">R{{ getTotal().toFixed(2) }}</span></ion-title>
    <ion-title [ngStyle]="{ backgroundColor: color }" class="bill-nickname">{{nickname}}:</ion-title>
    <ion-title offset-1>Due: <span class="bill-due">R{{ getDue().toFixed(2) }}</span></ion-title>
    <ion-title offset-1>Gratuity: <span class="bill-gratuity">R{{ getGratuity().toFixed(2) }}</span> at
      <input [(ngModel)]="gratuityPercent" col-2 type="number" value="{{ gratuityPercent }}"/> %
    </ion-title>
    <ion-title offset-1>Total Due: <span class="bill-total-due">R{{ getTotalDue().toFixed(2) }}</span></ion-title>
  </ion-toolbar>
</ion-footer>
